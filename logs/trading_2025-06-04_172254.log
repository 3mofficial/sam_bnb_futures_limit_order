2025-06-04 17:22:54,236 - TradingBot - INFO - 日志初始化成功，当前日志文件: logs\trading_2025-06-04_172254.log
2025-06-04 17:22:54,236 - TradingBot - INFO - 交易程序启动，进入日内多次换仓模式
2025-06-04 17:22:54,529 - TradingBot - INFO - Binance 客户端初始化成功，测试网络: False
2025-06-04 17:22:54,840 - TradingBot - INFO - 所有交易对已是全仓模式 (CROSSED)，无需修改
2025-06-04 17:22:54,958 - TradingBot - INFO - 账户已是单币种模式 (Single)，无需修改
2025-06-04 17:22:55,076 - TradingBot - INFO - 账户已是单向模式 (One-way)，无需修改
2025-06-04 17:22:55,492 - TradingBot - INFO - 检查 20250604 的文件或邮件，Run_ID: 2025-06-04_172255
2025-06-04 17:22:55,492 - TradingBot - INFO - 检查本地文件: data/pos20250604_v3.csv
2025-06-04 17:22:55,492 - TradingBot - INFO - 本地找到文件 data/pos20250604_v3.csv，哈希: 2fd5f461de1ee0e3813c1573e05a1290，未处理，直接使用
2025-06-04 17:22:55,493 - TradingBot - INFO - 处理 20250604 的pos文件，Run_ID: 2025-06-04_172255
2025-06-04 17:22:55,493 - TradingBot - INFO - 🚀 开始执行交易引擎 | Date: 20250604 | RunID: 2025-06-04_172255
2025-06-04 17:22:55,905 - TradingBot - INFO - 当前没有未成交的挂单
2025-06-04 17:22:55,910 - TradingBot - INFO - 📋 黑名单过滤结果
├─ 被过滤币种 (7个): BADGERUSDT, BALUSDT, LINAUSDT, NULSUSDT, SNTUSDT, TROYUSDT, VIDTUSDT
└─ 剩余候选池: 166/173
2025-06-04 17:22:55,914 - TradingBot - INFO - 🔍 有效候选列表
├─ 多头候选: 85个
└─ 空头候选: 81个
2025-06-04 17:22:56,201 - TradingBot - INFO - =====账户信息获取成功: totalMarginBalance = 48.20639761, available_balance = 5.46596299=====
2025-06-04 17:22:56,201 - TradingBot - INFO - 每笔交易资金份额: per_share=3.086171257857143
2025-06-04 17:22:56,314 - TradingBot - INFO - 获取到 14 个非零持仓
2025-06-04 17:22:56,314 - TradingBot - INFO - 当前持仓: {'LRCUSDT': 104.0, 'FILUSDT': -3.5, 'DENTUSDT': 12245.0, 'ONGUSDT': 49.0, 'SXPUSDT': 49.8, 'XMRUSDT': -0.026, 'ARKUSDT': -24.0, 'AERGOUSDT': -76.0, 'BELUSDT': -31.0, 'SFPUSDT': 19.0, 'RLCUSDT': 9.0, 'DFUSDT': -192.0, 'CTKUSDT': -28.0, 'SUNUSDT': 490.0}, 是否第一天: False
2025-06-04 17:22:56,508 - TradingBot - INFO - 交易所信息获取成功
2025-06-04 17:22:56,923 - TradingBot - INFO - RLCUSDT 数量调整: 9.084099071400539 -> 9.1, 最小值: 0.1, 最大值: 1000000.0, 名义价值=9.27472, 真实保证金=3.091573, 数量精度=1
2025-06-04 17:22:56,925 - TradingBot - INFO - 添加多头目标: RLCUSDT, 数量=9.1
2025-06-04 17:22:57,339 - TradingBot - INFO - DENTUSDT 数量调整: 12477.781365999232 -> 12478.0, 最小值: 1.0, 最大值: 500000000.0, 名义价值=9.258676000000001, 真实保证金=3.086225, 数量精度=0
2025-06-04 17:22:57,341 - TradingBot - INFO - 添加多头目标: DENTUSDT, 数量=12478.0
2025-06-04 17:22:57,811 - TradingBot - INFO - ONGUSDT 数量调整: 49.43146702387309 -> 49.0, 最小值: 1.0, 最大值: 1000000.0, 名义价值=9.1777, 真实保证金=3.059233, 数量精度=0
2025-06-04 17:22:57,812 - TradingBot - INFO - 添加多头目标: ONGUSDT, 数量=49.0
2025-06-04 17:22:58,246 - TradingBot - INFO - SFPUSDT 数量调整: 18.95682590821341 -> 19.0, 最小值: 1.0, 最大值: 5000000.0, 名义价值=9.2796, 真实保证金=3.093200, 数量精度=0
2025-06-04 17:22:58,249 - TradingBot - INFO - 添加多头目标: SFPUSDT, 数量=19.0
2025-06-04 17:22:58,691 - TradingBot - INFO - LRCUSDT 数量调整: 105.04326949820093 -> 105.0, 最小值: 1.0, 最大值: 10000000.0, 名义价值=9.2547, 真实保证金=3.084900, 数量精度=0
2025-06-04 17:22:58,693 - TradingBot - INFO - 添加多头目标: LRCUSDT, 数量=105.0
2025-06-04 17:22:59,195 - TradingBot - INFO - SUNUSDT 数量调整: 490.10183545452486 -> 490.0, 最小值: 1.0, 最大值: 50000000.0, 名义价值=9.256590000000001, 真实保证金=3.085530, 数量精度=0
2025-06-04 17:22:59,196 - TradingBot - INFO - 添加多头目标: SUNUSDT, 数量=490.0
2025-06-04 17:22:59,619 - TradingBot - INFO - SXPUSDT 数量调整: 50.263375535132624 -> 50.3, 最小值: 0.1, 最大值: 1000000.0, 名义价值=9.26526, 真实保证金=3.088420, 数量精度=1
2025-06-04 17:22:59,620 - TradingBot - INFO - 添加多头目标: SXPUSDT, 数量=50.3
2025-06-04 17:23:00,032 - TradingBot - INFO - ARKUSDT 数量调整: 24.326100298401023 -> 24.0, 最小值: 1.0, 最大值: 10000000.0, 名义价值=9.1344, 真实保证金=3.044800, 数量精度=0
2025-06-04 17:23:00,033 - TradingBot - INFO - 添加空头目标: ARKUSDT, 数量=-24.0
2025-06-04 17:23:00,033 - TradingBot - WARNING - 交易对 FTTUSDT 不可交易，跳过
2025-06-04 17:23:00,033 - TradingBot - WARNING - 交易对 XEMUSDT 不可交易，跳过
2025-06-04 17:23:00,034 - TradingBot - WARNING - 交易对 STPTUSDT 不可交易，跳过
2025-06-04 17:23:00,476 - TradingBot - INFO - CTKUSDT 数量调整: 28.860703782953337 -> 29.0, 最小值: 1.0, 最大值: 2500000.0, 名义价值=9.303199999999999, 真实保证金=3.101067, 数量精度=0
2025-06-04 17:23:00,477 - TradingBot - INFO - 添加空头目标: CTKUSDT, 数量=-29.0
2025-06-04 17:23:00,478 - TradingBot - WARNING - 交易对 BLZUSDT 不可交易，跳过
2025-06-04 17:23:00,478 - TradingBot - WARNING - 交易对 AMBUSDT 不可交易，跳过
2025-06-04 17:23:00,889 - TradingBot - INFO - AERGOUSDT 数量调整: 77.1221472184209 -> 77.0, 最小值: 1.0, 最大值: 4000000.0, 名义价值=9.24385, 真实保证金=3.081283, 数量精度=0
2025-06-04 17:23:00,890 - TradingBot - INFO - 添加空头目标: AERGOUSDT, 数量=-77.0
2025-06-04 17:23:00,890 - TradingBot - WARNING - 交易对 UNFIUSDT 不可交易，跳过
2025-06-04 17:23:00,891 - TradingBot - WARNING - 交易对 FTMUSDT 不可交易，跳过
2025-06-04 17:23:00,891 - TradingBot - WARNING - 交易对 STRAXUSDT 不可交易，跳过
2025-06-04 17:23:00,891 - TradingBot - WARNING - 交易对 WAVESUSDT 不可交易，跳过
2025-06-04 17:23:01,306 - TradingBot - INFO - DFUSDT 数量调整: 194.2617241622205 -> 194.0, 最小值: 1.0, 最大值: 5000000.0, 名义价值=9.24604, 真实保证金=3.082013, 数量精度=0
2025-06-04 17:23:01,308 - TradingBot - INFO - 添加空头目标: DFUSDT, 数量=-194.0
2025-06-04 17:23:01,714 - TradingBot - WARNING - BCHUSDT 数量调整为 0 (因名义价值 9.321209999999999 小于最小值 20.0)
2025-06-04 17:23:01,714 - TradingBot - INFO - BCHUSDT 数量调整: 0.022845297637553805 -> 0, 最小值: 0.001, 最大值: 10000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=3
2025-06-04 17:23:01,716 - TradingBot - WARNING - BCHUSDT 数量调整为 0，跳过
2025-06-04 17:23:02,124 - TradingBot - INFO - BELUSDT 数量调整: 31.577468531962584 -> 32.0, 最小值: 1.0, 最大值: 10000000.0, 名义价值=9.3824, 真实保证金=3.127467, 数量精度=0
2025-06-04 17:23:02,126 - TradingBot - INFO - 添加空头目标: BELUSDT, 数量=-32.0
2025-06-04 17:23:02,126 - TradingBot - WARNING - 交易对 MDTUSDT 不可交易，跳过
2025-06-04 17:23:02,126 - TradingBot - WARNING - 交易对 SCUSDT 不可交易，跳过
2025-06-04 17:23:02,126 - TradingBot - WARNING - 交易对 RENUSDT 不可交易，跳过
2025-06-04 17:23:02,545 - TradingBot - INFO - FILUSDT 数量调整: 3.529742193507979 -> 3.5, 最小值: 0.1, 最大值: 10000000.0, 名义价值=9.1805, 真实保证金=3.060167, 数量精度=1
2025-06-04 17:23:02,548 - TradingBot - INFO - 添加空头目标: FILUSDT, 数量=-3.5
2025-06-04 17:23:03,013 - TradingBot - WARNING - LTCUSDT 数量调整为 0 (因名义价值 9.277209999999998 小于最小值 20.0)
2025-06-04 17:23:03,014 - TradingBot - INFO - LTCUSDT 数量调整: 0.10279242559755113 -> 0, 最小值: 0.001, 最大值: 10000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=3
2025-06-04 17:23:03,015 - TradingBot - WARNING - LTCUSDT 数量调整为 0，跳过
2025-06-04 17:23:03,563 - TradingBot - INFO - XMRUSDT 数量调整: 0.02639859082336744 -> 0.026, 最小值: 0.001, 最大值: 10000.0, 名义价值=9.11872, 真实保证金=3.039573, 数量精度=3
2025-06-04 17:23:03,564 - TradingBot - INFO - 添加空头目标: XMRUSDT, 数量=-0.026
2025-06-04 17:23:03,565 - TradingBot - INFO - 初始化目标持仓: {'RLCUSDT': 9.1, 'DENTUSDT': 12478.0, 'ONGUSDT': 49.0, 'SFPUSDT': 19.0, 'LRCUSDT': 105.0, 'SUNUSDT': 490.0, 'SXPUSDT': 50.3, 'ARKUSDT': -24.0, 'CTKUSDT': -29.0, 'AERGOUSDT': -77.0, 'DFUSDT': -194.0, 'BELUSDT': -32.0, 'FILUSDT': -3.5, 'XMRUSDT': -0.026}
2025-06-04 17:23:03,681 - TradingBot - INFO - 获取到 14 个非零持仓
2025-06-04 17:23:03,682 - TradingBot - INFO - ==================== 开始持续限价单调仓 ====================
2025-06-04 17:23:03,682 - TradingBot - INFO - 开始第 1 轮调仓...
2025-06-04 17:23:03,812 - TradingBot - INFO - 第 1 轮开始时可用余额: 5.47994403
2025-06-04 17:23:03,924 - TradingBot - INFO - 第 1 轮开仓前可用余额: 5.47994403, 开仓需求: {'SXPUSDT': 0.5, 'DENTUSDT': 233.0, 'BELUSDT': -1.0, 'CTKUSDT': -1.0, 'AERGOUSDT': -1.0, 'DFUSDT': -2.0, 'LRCUSDT': 1.0, 'RLCUSDT': 0.09999999999999964}
2025-06-04 17:23:03,924 - TradingBot - INFO - 第 1 轮: 处理开仓 SXPUSDT BUY, 需求数量=0.5
2025-06-04 17:23:04,379 - TradingBot - WARNING - SXPUSDT 数量调整为 0 (因名义价值 0.09205 小于最小值 5.0)
2025-06-04 17:23:04,380 - TradingBot - INFO - SXPUSDT 数量调整: 0.5 -> 0, 最小值: 0.1, 最大值: 1000000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=1
2025-06-04 17:23:04,381 - TradingBot - INFO - 第 1 轮: SXPUSDT 开仓调整后数量=0, is_reverse_open=False
2025-06-04 17:23:04,381 - TradingBot - WARNING - 第 1 轮: SXPUSDT 调整数量为 0，跳过
2025-06-04 17:23:04,381 - TradingBot - INFO - 第 1 轮: 处理开仓 DENTUSDT BUY, 需求数量=233.0
2025-06-04 17:23:04,804 - TradingBot - WARNING - DENTUSDT 数量调整为 0 (因名义价值 0.17288599999999998 小于最小值 5.0)
2025-06-04 17:23:04,805 - TradingBot - INFO - DENTUSDT 数量调整: 233.0 -> 0, 最小值: 1.0, 最大值: 500000000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=0
2025-06-04 17:23:04,805 - TradingBot - INFO - 第 1 轮: DENTUSDT 开仓调整后数量=0, is_reverse_open=False
2025-06-04 17:23:04,805 - TradingBot - WARNING - 第 1 轮: DENTUSDT 调整数量为 0，跳过
2025-06-04 17:23:04,806 - TradingBot - INFO - 第 1 轮: 处理开仓 BELUSDT SELL, 需求数量=-1.0
2025-06-04 17:23:05,468 - TradingBot - WARNING - BELUSDT 数量调整为 0 (因名义价值 0.2931 小于最小值 5.0)
2025-06-04 17:23:05,468 - TradingBot - INFO - BELUSDT 数量调整: 1.0 -> 0, 最小值: 1.0, 最大值: 10000000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=0
2025-06-04 17:23:05,469 - TradingBot - INFO - 第 1 轮: BELUSDT 开仓调整后数量=0, is_reverse_open=False
2025-06-04 17:23:05,470 - TradingBot - WARNING - 第 1 轮: BELUSDT 调整数量为 0，跳过
2025-06-04 17:23:05,470 - TradingBot - INFO - 第 1 轮: 处理开仓 CTKUSDT SELL, 需求数量=-1.0
2025-06-04 17:23:05,989 - TradingBot - WARNING - CTKUSDT 数量调整为 0 (因名义价值 0.32080000000000003 小于最小值 5.0)
2025-06-04 17:23:05,990 - TradingBot - INFO - CTKUSDT 数量调整: 1.0 -> 0, 最小值: 1.0, 最大值: 2500000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=0
2025-06-04 17:23:05,992 - TradingBot - INFO - 第 1 轮: CTKUSDT 开仓调整后数量=0, is_reverse_open=False
2025-06-04 17:23:05,992 - TradingBot - WARNING - 第 1 轮: CTKUSDT 调整数量为 0，跳过
2025-06-04 17:23:05,992 - TradingBot - INFO - 第 1 轮: 处理开仓 AERGOUSDT SELL, 需求数量=-1.0
2025-06-04 17:23:06,515 - TradingBot - WARNING - AERGOUSDT 数量调整为 0 (因名义价值 0.12010000000000001 小于最小值 5.0)
2025-06-04 17:23:06,516 - TradingBot - INFO - AERGOUSDT 数量调整: 1.0 -> 0, 最小值: 1.0, 最大值: 4000000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=0
2025-06-04 17:23:06,517 - TradingBot - INFO - 第 1 轮: AERGOUSDT 开仓调整后数量=0, is_reverse_open=False
2025-06-04 17:23:06,517 - TradingBot - WARNING - 第 1 轮: AERGOUSDT 调整数量为 0，跳过
2025-06-04 17:23:06,517 - TradingBot - INFO - 第 1 轮: 处理开仓 DFUSDT SELL, 需求数量=-2.0
2025-06-04 17:23:07,020 - TradingBot - WARNING - DFUSDT 数量调整为 0 (因名义价值 0.09532 小于最小值 5.0)
2025-06-04 17:23:07,020 - TradingBot - INFO - DFUSDT 数量调整: 2.0 -> 0, 最小值: 1.0, 最大值: 5000000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=0
2025-06-04 17:23:07,022 - TradingBot - INFO - 第 1 轮: DFUSDT 开仓调整后数量=0, is_reverse_open=False
2025-06-04 17:23:07,022 - TradingBot - WARNING - 第 1 轮: DFUSDT 调整数量为 0，跳过
2025-06-04 17:23:07,022 - TradingBot - INFO - 第 1 轮: 处理开仓 LRCUSDT BUY, 需求数量=1.0
2025-06-04 17:23:07,522 - TradingBot - WARNING - LRCUSDT 数量调整为 0 (因名义价值 0.08810000000000001 小于最小值 5.0)
2025-06-04 17:23:07,522 - TradingBot - INFO - LRCUSDT 数量调整: 1.0 -> 0, 最小值: 1.0, 最大值: 10000000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=0
2025-06-04 17:23:07,523 - TradingBot - INFO - 第 1 轮: LRCUSDT 开仓调整后数量=0, is_reverse_open=False
2025-06-04 17:23:07,524 - TradingBot - WARNING - 第 1 轮: LRCUSDT 调整数量为 0，跳过
2025-06-04 17:23:07,524 - TradingBot - INFO - 第 1 轮: 处理开仓 RLCUSDT BUY, 需求数量=0.09999999999999964
2025-06-04 17:23:08,043 - TradingBot - WARNING - RLCUSDT 数量调整为 0 (因名义价值 0.10193000000000002 小于最小值 5.0)
2025-06-04 17:23:08,043 - TradingBot - INFO - RLCUSDT 数量调整: 0.09999999999999964 -> 0, 最小值: 0.1, 最大值: 1000000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=1
2025-06-04 17:23:08,047 - TradingBot - INFO - 第 1 轮: RLCUSDT 开仓调整后数量=0, is_reverse_open=False
2025-06-04 17:23:08,047 - TradingBot - WARNING - 第 1 轮: RLCUSDT 调整数量为 0，跳过
2025-06-04 17:23:08,170 - TradingBot - INFO - 获取到 14 个非零持仓
2025-06-04 17:23:08,673 - TradingBot - INFO - SXPUSDT 平仓数量调整: 0.5 -> 0.5, 最小值: 0.1, 最大值: 1000000.0, 名义价值=0.0921, 真实保证金=0.030700, 数量精度=1
2025-06-04 17:23:08,675 - TradingBot - INFO - 第 1 轮: SXPUSDT 差值 0.5 为小额调整（名义价值 0.0921 < 5 或数量过小），跳过后续轮次
2025-06-04 17:23:09,219 - TradingBot - INFO - DENTUSDT 平仓数量调整: 233.0 -> 233.0, 最小值: 1.0, 最大值: 500000000.0, 名义价值=0.173119, 真实保证金=0.057706, 数量精度=0
2025-06-04 17:23:09,220 - TradingBot - INFO - 第 1 轮: DENTUSDT 差值 233.0 为小额调整（名义价值 0.173119 < 5 或数量过小），跳过后续轮次
2025-06-04 17:23:09,896 - TradingBot - INFO - BELUSDT 平仓数量调整: 1.0 -> 1.0, 最小值: 1.0, 最大值: 10000000.0, 名义价值=0.293, 真实保证金=0.097667, 数量精度=0
2025-06-04 17:23:09,898 - TradingBot - INFO - 第 1 轮: BELUSDT 差值 -1.0 为小额调整（名义价值 0.293 < 5 或数量过小），跳过后续轮次
2025-06-04 17:23:10,410 - TradingBot - INFO - CTKUSDT 平仓数量调整: 1.0 -> 1.0, 最小值: 1.0, 最大值: 2500000.0, 名义价值=0.3208, 真实保证金=0.106933, 数量精度=0
2025-06-04 17:23:10,411 - TradingBot - INFO - 第 1 轮: CTKUSDT 差值 -1.0 为小额调整（名义价值 0.3208 < 5 或数量过小），跳过后续轮次
2025-06-04 17:23:11,083 - TradingBot - INFO - AERGOUSDT 平仓数量调整: 1.0 -> 1.0, 最小值: 1.0, 最大值: 4000000.0, 名义价值=0.12011, 真实保证金=0.040037, 数量精度=0
2025-06-04 17:23:11,085 - TradingBot - INFO - 第 1 轮: AERGOUSDT 差值 -1.0 为小额调整（名义价值 0.12011 < 5 或数量过小），跳过后续轮次
2025-06-04 17:23:11,902 - TradingBot - INFO - DFUSDT 平仓数量调整: 2.0 -> 2.0, 最小值: 1.0, 最大值: 5000000.0, 名义价值=0.09532, 真实保证金=0.031773, 数量精度=0
2025-06-04 17:23:11,904 - TradingBot - INFO - 第 1 轮: DFUSDT 差值 -2.0 为小额调整（名义价值 0.09532 < 5 或数量过小），跳过后续轮次
2025-06-04 17:23:12,410 - TradingBot - INFO - LRCUSDT 平仓数量调整: 1.0 -> 1.0, 最小值: 1.0, 最大值: 10000000.0, 名义价值=0.08814, 真实保证金=0.029380, 数量精度=0
2025-06-04 17:23:12,413 - TradingBot - INFO - 第 1 轮: LRCUSDT 差值 1.0 为小额调整（名义价值 0.08814 < 5 或数量过小），跳过后续轮次
2025-06-04 17:23:12,928 - TradingBot - INFO - RLCUSDT 平仓数量调整: 0.09999999999999964 -> 0.1, 最小值: 0.1, 最大值: 1000000.0, 名义价值=0.10195000000000001, 真实保证金=0.033983, 数量精度=1
2025-06-04 17:23:12,931 - TradingBot - INFO - 第 1 轮: RLCUSDT 差值 0.09999999999999964 为小额调整（名义价值 0.10195000000000001 < 5 或数量过小），跳过后续轮次
2025-06-04 17:23:12,931 - TradingBot - INFO - 第 1 轮完成，剩余需求: {}
2025-06-04 17:23:12,931 - TradingBot - INFO - 第 1 轮后所有目标已达成，结束限价单调仓
2025-06-04 17:23:12,931 - TradingBot - INFO - ==================== 市价单补齐：后续调仓 ====================
2025-06-04 17:23:13,048 - TradingBot - INFO - 获取到 14 个非零持仓
2025-06-04 17:23:13,048 - TradingBot - INFO - 市价单补齐：所有目标已达成，无需补齐
2025-06-04 17:23:13,168 - TradingBot - INFO - 准备保存 14 条持仓记录，Run_ID=2025-06-04_172255, 调仓日期=2025-06-04
2025-06-04 17:23:13,176 - TradingBot - INFO - 持仓数据已保存到 data/positions_output.csv，合并后记录数: 28
2025-06-04 17:23:13,187 - TradingBot - INFO - 验证: data/positions_output.csv 中 Run_ID=2025-06-04_172255 的记录数: 14
2025-06-04 17:23:35,532 - TradingBot - INFO - 账户信息已保存为JSON文件: data/account_info_20250604_172335.json
2025-06-04 17:23:35,532 - TradingBot - INFO - 开始计算手续费和已实现盈亏...
2025-06-04 17:23:35,532 - TradingBot - INFO - 使用实际交易时间戳: start_time=1749028975493, end_time=1749028993188
2025-06-04 17:23:35,532 - TradingBot - INFO - 开始获取手续费记录: start_time=1749028975493, end_time=1749028993188, limit=1000
2025-06-04 17:23:35,679 - TradingBot - INFO - API返回空记录，可能该时间段内没有交易
2025-06-04 17:23:35,679 - TradingBot - INFO - 获取到 0 条手续费记录
2025-06-04 17:23:35,680 - TradingBot - INFO - 手续费汇总 (trade_commission_summary_2025-06-04): 0.0 USDT, 记录数: 0
2025-06-04 17:23:35,680 - TradingBot - INFO - 手续费计算结果: {'value': 0.0, 'description': '买卖交易手续费总和', 'date': '2025-06-04_17:23:35', 'records_count': 0}
2025-06-04 17:23:35,680 - TradingBot - INFO - 已存在已实现盈亏记录 (trade_realized_pnl_summary_2025-06-04): 0 USDT
2025-06-04 17:23:35,680 - TradingBot - INFO - 已实现盈亏计算结果: {'value': 0, 'description': '买卖交易已实现盈亏总和', 'date': '2025-06-04'}
2025-06-04 17:23:35,935 - TradingBot - INFO - 获取到 14 个非零持仓
2025-06-04 17:23:35,938 - TradingBot - INFO - 账户信息已保存为JSON文件: data/account_info_20250604_172255.json
2025-06-04 17:23:35,955 - TradingBot - INFO - 加载 account_metrics.xlsx 成功，记录数: 14
2025-06-04 17:23:35,957 - TradingBot - INFO - 找到 1 条 after_trade_balance 记录
2025-06-04 17:23:35,958 - TradingBot - INFO - 找到上一次记录: Record_Time=2025-06-04 17:21:58, Run_ID=2025-06-04_172118, after_trade_balance=48.1853699
2025-06-04 17:23:35,958 - TradingBot - INFO - Pre-rebalance return: 0.047624%
2025-06-04 17:23:35,959 - TradingBot - INFO - Post-rebalance return: 0.043206%
2025-06-04 17:23:36,466 - TradingBot - INFO - 成功写入 14 条指标到 data/account_metrics.xlsx，Run_ID=2025-06-04_172255
2025-06-04 17:23:36,467 - TradingBot - INFO - ✅ 交易引擎执行完成 | RunID: 2025-06-04_172255
2025-06-04 17:23:36,467 - TradingBot - INFO - 当前日期: 2025-06-04, Run_ID: 2025-06-04_172255
2025-06-04 17:23:36,474 - TradingBot - INFO - 读取 data/positions_output.csv，去重后包含 28 条记录
2025-06-04 17:23:36,474 - TradingBot - INFO - 所有 Run_ID: ['2025-06-04_172118', '2025-06-04_172255']
2025-06-04 17:23:36,474 - TradingBot - INFO - 所有调仓日期: ['2025-06-04']
2025-06-04 17:23:36,475 - TradingBot - INFO - 找到 14 条 Run_ID=2025-06-04_172255 或日期=2025-06-04 的记录
2025-06-04 17:23:36,475 - TradingBot - INFO - 已提取所需字段的持仓数据
2025-06-04 17:23:36,476 - TradingBot - INFO - 正持仓数量: 7, 负持仓数量: 7
2025-06-04 17:23:36,477 - TradingBot - INFO - 资金费率文件 data/pos20250604_v3.csv 已加载，去重后包含 173 条记录
2025-06-04 17:23:36,479 - TradingBot - INFO - 已为 7 个黑名单币种设置 ErrorReason: 黑名单过滤
2025-06-04 17:23:36,480 - TradingBot - INFO - 已为 22 个币种映射其他错误原因
2025-06-04 17:23:36,482 - TradingBot - INFO - 正持仓资金费率数据已筛选，最大 id: 7
2025-06-04 17:23:36,484 - TradingBot - INFO - 正持仓数据已完成合并并处理空调仓日期、Run_ID 和 ErrorReason
2025-06-04 17:23:36,486 - TradingBot - INFO - 负持仓资金费率数据已筛选，最小 id: 151
2025-06-04 17:23:36,489 - TradingBot - INFO - 负持仓数据已完成合并并处理空调仓日期、Run_ID 和 ErrorReason
2025-06-04 17:23:36,491 - TradingBot - INFO - 正负持仓结果已合并
2025-06-04 17:23:36,539 - TradingBot - INFO - 分析结果已去重并追加写入文件: data/position_analysis.xlsx，记录数: 60
2025-06-04 17:23:36,568 - TradingBot - INFO - 唯一日期数量为 1，少于3天，不执行可视化
2025-06-04 17:23:36,579 - TradingBot - INFO - 添加附件: data\position_analysis.xlsx
2025-06-04 17:23:36,580 - TradingBot - INFO - 未找到可视化 PDF 文件: data\2025-06-04_account_metrics_data_visualization.pdf
2025-06-04 17:23:36,591 - TradingBot - INFO - 尝试连接到 smtp.gmail.com:465 (第 1/5)
2025-06-04 17:23:57,653 - TradingBot - ERROR - 发送邮件失败 (第 1/5): [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。
2025-06-04 17:23:57,653 - TradingBot - INFO - 等待 10 秒后重试...
2025-06-04 17:24:07,660 - TradingBot - INFO - 尝试连接到 smtp.gmail.com:465 (第 2/5)
2025-06-04 17:24:28,681 - TradingBot - ERROR - 发送邮件失败 (第 2/5): [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。
2025-06-04 17:24:28,681 - TradingBot - INFO - 等待 10 秒后重试...
2025-06-04 17:24:38,687 - TradingBot - INFO - 尝试连接到 smtp.gmail.com:465 (第 3/5)
2025-06-04 17:24:59,729 - TradingBot - ERROR - 发送邮件失败 (第 3/5): [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。
2025-06-04 17:24:59,729 - TradingBot - INFO - 等待 10 秒后重试...
2025-06-04 17:25:09,744 - TradingBot - INFO - 尝试连接到 smtp.gmail.com:465 (第 4/5)
2025-06-04 17:25:30,781 - TradingBot - ERROR - 发送邮件失败 (第 4/5): [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。
2025-06-04 17:25:30,781 - TradingBot - INFO - 等待 10 秒后重试...
2025-06-04 17:25:40,794 - TradingBot - INFO - 尝试连接到 smtp.gmail.com:465 (第 5/5)
2025-06-04 17:25:51,869 - TradingBot - ERROR - 发送邮件失败 (第 5/5): [Errno 11001] getaddrinfo failed
2025-06-04 17:25:51,869 - TradingBot - ERROR - 达到最大重试次数，邮件发送失败
2025-06-04 17:25:51,869 - TradingBot - INFO - 20250604 交易完成，Run_ID: 2025-06-04_172255
2025-06-04 17:25:51,870 - TradingBot - INFO - 记录已处理文件 data/pos20250604_v3.csv，哈希: 2fd5f461de1ee0e3813c1573e05a1290，Run_ID: 2025-06-04_172255
2025-06-04 17:25:51,870 - TradingBot - INFO - 交易完成后等待 10 分钟
