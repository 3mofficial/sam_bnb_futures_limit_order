2025-06-04 17:48:38,421 - TradingBot - INFO - 日志初始化成功，当前日志文件: logs\trading_2025-06-04_174838.log
2025-06-04 17:48:38,422 - TradingBot - INFO - 交易程序启动，进入日内多次换仓模式
2025-06-04 17:48:39,149 - TradingBot - INFO - Binance 客户端初始化成功，测试网络: False
2025-06-04 17:48:40,143 - TradingBot - INFO - 所有交易对已是全仓模式 (CROSSED)，无需修改
2025-06-04 17:48:40,291 - TradingBot - INFO - 账户已是单币种模式 (Single)，无需修改
2025-06-04 17:48:40,417 - TradingBot - INFO - 账户已是单向模式 (One-way)，无需修改
2025-06-04 17:48:40,884 - TradingBot - INFO - 检查 20250604 的文件或邮件，Run_ID: 2025-06-04_174840
2025-06-04 17:48:40,885 - TradingBot - INFO - 检查本地文件: data/pos20250604_v3.csv
2025-06-04 17:48:40,885 - TradingBot - INFO - 本地找到文件 data/pos20250604_v3.csv，哈希: 2fd5f461de1ee0e3813c1573e05a1290，未处理，直接使用
2025-06-04 17:48:40,885 - TradingBot - INFO - 处理 20250604 的pos文件，Run_ID: 2025-06-04_174840
2025-06-04 17:48:40,886 - TradingBot - INFO - 🚀 开始执行交易引擎 | Date: 20250604 | RunID: 2025-06-04_174840
2025-06-04 17:48:41,002 - TradingBot - INFO - 当前没有未成交的挂单
2025-06-04 17:48:41,005 - TradingBot - INFO - 📋 黑名单过滤结果
├─ 被过滤币种 (7个): BADGERUSDT, BALUSDT, LINAUSDT, NULSUSDT, SNTUSDT, TROYUSDT, VIDTUSDT
└─ 剩余候选池: 166/173
2025-06-04 17:48:41,010 - TradingBot - INFO - 🔍 有效候选列表
├─ 多头候选: 85个
└─ 空头候选: 81个
2025-06-04 17:48:41,644 - TradingBot - INFO - =====账户信息获取成功: totalMarginBalance = 48.29669157, available_balance = 5.38197082=====
2025-06-04 17:48:41,644 - TradingBot - INFO - 每笔交易资金份额: per_share=3.0926208264285715
2025-06-04 17:48:41,770 - TradingBot - INFO - 获取到 14 个非零持仓
2025-06-04 17:48:41,771 - TradingBot - INFO - 当前持仓: {'LRCUSDT': 104.0, 'FILUSDT': -3.5, 'DENTUSDT': 12245.0, 'ONGUSDT': 49.0, 'SXPUSDT': 49.8, 'XMRUSDT': -0.026, 'ARKUSDT': -24.0, 'AERGOUSDT': -76.0, 'BELUSDT': -31.0, 'SFPUSDT': 19.0, 'RLCUSDT': 9.0, 'DFUSDT': -192.0, 'CTKUSDT': -28.0, 'SUNUSDT': 490.0}, 是否第一天: False
2025-06-04 17:48:41,947 - TradingBot - INFO - 交易所信息获取成功
2025-06-04 17:48:43,872 - TradingBot - INFO - RLCUSDT 数量调整: 8.992791004444813 -> 9.0, 最小值: 0.1, 最大值: 1000000.0, 名义价值=9.285300000000001, 真实保证金=3.095100, 数量精度=1
2025-06-04 17:48:43,875 - TradingBot - INFO - 添加多头目标: RLCUSDT, 数量=9.0
2025-06-04 17:48:44,527 - TradingBot - INFO - DENTUSDT 数量调整: 12403.559464285714 -> 12404.0, 最小值: 1.0, 最大值: 500000000.0, 名义价值=9.278191999999999, 真实保证金=3.092731, 数量精度=0
2025-06-04 17:48:44,528 - TradingBot - INFO - 添加多头目标: DENTUSDT, 数量=12404.0
2025-06-04 17:48:45,146 - TradingBot - INFO - ONGUSDT 数量调整: 49.38185266811643 -> 49.0, 最小值: 1.0, 最大值: 1000000.0, 名义价值=9.20612, 真实保证金=3.068707, 数量精度=0
2025-06-04 17:48:45,148 - TradingBot - INFO - 添加多头目标: ONGUSDT, 数量=49.0
2025-06-04 17:48:47,153 - TradingBot - INFO - SFPUSDT 数量调整: 18.94601282271945 -> 19.0, 最小值: 1.0, 最大值: 5000000.0, 名义价值=9.304300000000001, 真实保证金=3.101433, 数量精度=0
2025-06-04 17:48:47,155 - TradingBot - INFO - 添加多头目标: SFPUSDT, 数量=19.0
2025-06-04 17:48:52,342 - TradingBot - INFO - LRCUSDT 数量调整: 105.25085058747264 -> 105.0, 最小值: 1.0, 最大值: 10000000.0, 名义价值=9.25575, 真实保证金=3.085250, 数量精度=0
2025-06-04 17:48:52,344 - TradingBot - INFO - 添加多头目标: LRCUSDT, 数量=105.0
2025-06-04 17:48:54,056 - TradingBot - INFO - SUNUSDT 数量调整: 490.2696300615998 -> 490.0, 最小值: 1.0, 最大值: 50000000.0, 名义价值=9.27276, 真实保证金=3.090920, 数量精度=0
2025-06-04 17:48:54,057 - TradingBot - INFO - 添加多头目标: SUNUSDT, 数量=490.0
2025-06-04 17:48:56,349 - TradingBot - INFO - SXPUSDT 数量调整: 50.177731094027656 -> 50.2, 最小值: 0.1, 最大值: 1000000.0, 名义价值=9.28198, 真实保证金=3.093993, 数量精度=1
2025-06-04 17:48:56,350 - TradingBot - INFO - 添加多头目标: SXPUSDT, 数量=50.2
2025-06-04 17:48:57,388 - TradingBot - INFO - ARKUSDT 数量调整: 24.29395778812703 -> 24.0, 最小值: 1.0, 最大值: 10000000.0, 名义价值=9.165600000000001, 真实保证金=3.055200, 数量精度=0
2025-06-04 17:48:57,390 - TradingBot - INFO - 添加空头目标: ARKUSDT, 数量=-24.0
2025-06-04 17:48:57,390 - TradingBot - WARNING - 交易对 FTTUSDT 不可交易，跳过
2025-06-04 17:48:57,390 - TradingBot - WARNING - 交易对 XEMUSDT 不可交易，跳过
2025-06-04 17:48:57,390 - TradingBot - WARNING - 交易对 STPTUSDT 不可交易，跳过
2025-06-04 17:48:58,257 - TradingBot - INFO - CTKUSDT 数量调整: 28.858048147078424 -> 29.0, 最小值: 1.0, 最大值: 2500000.0, 名义价值=9.323500000000001, 真实保证金=3.107833, 数量精度=0
2025-06-04 17:48:58,259 - TradingBot - INFO - 添加空头目标: CTKUSDT, 数量=-29.0
2025-06-04 17:48:58,259 - TradingBot - WARNING - 交易对 BLZUSDT 不可交易，跳过
2025-06-04 17:48:58,259 - TradingBot - WARNING - 交易对 AMBUSDT 不可交易，跳过
2025-06-04 17:48:58,933 - TradingBot - INFO - AERGOUSDT 数量调整: 76.80349734508042 -> 77.0, 最小值: 1.0, 最大值: 4000000.0, 名义价值=9.3016, 真实保证金=3.100533, 数量精度=0
2025-06-04 17:48:58,934 - TradingBot - INFO - 添加空头目标: AERGOUSDT, 数量=-77.0
2025-06-04 17:48:58,934 - TradingBot - WARNING - 交易对 UNFIUSDT 不可交易，跳过
2025-06-04 17:48:58,935 - TradingBot - WARNING - 交易对 FTMUSDT 不可交易，跳过
2025-06-04 17:48:58,935 - TradingBot - WARNING - 交易对 STRAXUSDT 不可交易，跳过
2025-06-04 17:48:58,935 - TradingBot - WARNING - 交易对 WAVESUSDT 不可交易，跳过
2025-06-04 17:49:00,632 - TradingBot - INFO - DFUSDT 数量调整: 194.5452396579097 -> 195.0, 最小值: 1.0, 最大值: 5000000.0, 名义价值=9.29955, 真实保证金=3.099850, 数量精度=0
2025-06-04 17:49:00,634 - TradingBot - INFO - 添加空头目标: DFUSDT, 数量=-195.0
2025-06-04 17:49:01,571 - TradingBot - WARNING - BCHUSDT 数量调整为 0 (因名义价值 9.372729999999999 小于最小值 20.0)
2025-06-04 17:49:01,572 - TradingBot - INFO - BCHUSDT 数量调整: 0.022767201981020623 -> 0, 最小值: 0.001, 最大值: 10000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=3
2025-06-04 17:49:01,573 - TradingBot - WARNING - BCHUSDT 数量调整为 0，跳过
2025-06-04 17:49:02,728 - TradingBot - INFO - BELUSDT 数量调整: 31.53590237690589 -> 32.0, 最小值: 1.0, 最大值: 10000000.0, 名义价值=9.4144, 真实保证金=3.138133, 数量精度=0
2025-06-04 17:49:02,730 - TradingBot - INFO - 添加空头目标: BELUSDT, 数量=-32.0
2025-06-04 17:49:02,730 - TradingBot - WARNING - 交易对 MDTUSDT 不可交易，跳过
2025-06-04 17:49:02,730 - TradingBot - WARNING - 交易对 SCUSDT 不可交易，跳过
2025-06-04 17:49:02,730 - TradingBot - WARNING - 交易对 RENUSDT 不可交易，跳过
2025-06-04 17:49:03,899 - TradingBot - INFO - FILUSDT 数量调整: 3.5263635421078354 -> 3.5, 最小值: 0.1, 最大值: 10000000.0, 名义价值=9.208499999999999, 真实保证金=3.069500, 数量精度=1
2025-06-04 17:49:03,901 - TradingBot - INFO - 添加空头目标: FILUSDT, 数量=-3.5
2025-06-04 17:49:05,882 - TradingBot - WARNING - LTCUSDT 数量调整为 0 (因名义价值 9.23916 小于最小值 20.0)
2025-06-04 17:49:05,882 - TradingBot - INFO - LTCUSDT 数量调整: 0.10242727400403748 -> 0, 最小值: 0.001, 最大值: 10000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=3
2025-06-04 17:49:05,884 - TradingBot - WARNING - LTCUSDT 数量调整为 0，跳过
2025-06-04 17:49:07,325 - TradingBot - INFO - XMRUSDT 数量调整: 0.026368051154680026 -> 0.026, 最小值: 0.001, 最大值: 10000.0, 名义价值=9.14836, 真实保证金=3.049453, 数量精度=3
2025-06-04 17:49:07,327 - TradingBot - INFO - 添加空头目标: XMRUSDT, 数量=-0.026
2025-06-04 17:49:07,327 - TradingBot - INFO - 初始化目标持仓: {'RLCUSDT': 9.0, 'DENTUSDT': 12404.0, 'ONGUSDT': 49.0, 'SFPUSDT': 19.0, 'LRCUSDT': 105.0, 'SUNUSDT': 490.0, 'SXPUSDT': 50.2, 'ARKUSDT': -24.0, 'CTKUSDT': -29.0, 'AERGOUSDT': -77.0, 'DFUSDT': -195.0, 'BELUSDT': -32.0, 'FILUSDT': -3.5, 'XMRUSDT': -0.026}
2025-06-04 17:49:07,458 - TradingBot - INFO - 获取到 14 个非零持仓
2025-06-04 17:49:07,460 - TradingBot - INFO - ==================== 开始持续限价单调仓 ====================
2025-06-04 17:49:07,460 - TradingBot - INFO - 开始第 1 轮调仓...
2025-06-04 17:49:07,647 - TradingBot - INFO - 第 1 轮开始时可用余额: 5.38255756
2025-06-04 17:49:08,030 - TradingBot - INFO - 第 1 轮开仓前可用余额: 5.38255756, 开仓需求: {'AERGOUSDT': -1.0, 'DENTUSDT': 159.0, 'DFUSDT': -3.0, 'SXPUSDT': 0.4000000000000057, 'LRCUSDT': 1.0, 'BELUSDT': -1.0, 'CTKUSDT': -1.0}
2025-06-04 17:49:08,031 - TradingBot - INFO - 第 1 轮: 处理开仓 AERGOUSDT SELL, 需求数量=-1.0
2025-06-04 17:49:08,937 - TradingBot - WARNING - AERGOUSDT 数量调整为 0 (因名义价值 0.12078000000000001 小于最小值 5.0)
2025-06-04 17:49:08,938 - TradingBot - INFO - AERGOUSDT 数量调整: 1.0 -> 0, 最小值: 1.0, 最大值: 4000000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=0
2025-06-04 17:49:08,939 - TradingBot - INFO - 第 1 轮: AERGOUSDT 开仓调整后数量=0, is_reverse_open=False
2025-06-04 17:49:08,940 - TradingBot - WARNING - 第 1 轮: AERGOUSDT 调整数量为 0，跳过
2025-06-04 17:49:08,940 - TradingBot - INFO - 第 1 轮: 处理开仓 DENTUSDT BUY, 需求数量=159.0
2025-06-04 17:49:10,230 - TradingBot - WARNING - DENTUSDT 数量调整为 0 (因名义价值 0.11877299999999999 小于最小值 5.0)
2025-06-04 17:49:10,231 - TradingBot - INFO - DENTUSDT 数量调整: 159.0 -> 0, 最小值: 1.0, 最大值: 500000000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=0
2025-06-04 17:49:10,233 - TradingBot - INFO - 第 1 轮: DENTUSDT 开仓调整后数量=0, is_reverse_open=False
2025-06-04 17:49:10,233 - TradingBot - WARNING - 第 1 轮: DENTUSDT 调整数量为 0，跳过
2025-06-04 17:49:10,233 - TradingBot - INFO - 第 1 轮: 处理开仓 DFUSDT SELL, 需求数量=-3.0
2025-06-04 17:49:10,914 - TradingBot - WARNING - DFUSDT 数量调整为 0 (因名义价值 0.14313 小于最小值 5.0)
2025-06-04 17:49:10,915 - TradingBot - INFO - DFUSDT 数量调整: 3.0 -> 0, 最小值: 1.0, 最大值: 5000000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=0
2025-06-04 17:49:10,917 - TradingBot - INFO - 第 1 轮: DFUSDT 开仓调整后数量=0, is_reverse_open=False
2025-06-04 17:49:10,917 - TradingBot - WARNING - 第 1 轮: DFUSDT 调整数量为 0，跳过
2025-06-04 17:49:10,917 - TradingBot - INFO - 第 1 轮: 处理开仓 SXPUSDT BUY, 需求数量=0.4000000000000057
2025-06-04 17:49:11,589 - TradingBot - WARNING - SXPUSDT 数量调整为 0 (因名义价值 0.07392000000000001 小于最小值 5.0)
2025-06-04 17:49:11,589 - TradingBot - INFO - SXPUSDT 数量调整: 0.4000000000000057 -> 0, 最小值: 0.1, 最大值: 1000000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=1
2025-06-04 17:49:11,591 - TradingBot - INFO - 第 1 轮: SXPUSDT 开仓调整后数量=0, is_reverse_open=False
2025-06-04 17:49:11,591 - TradingBot - WARNING - 第 1 轮: SXPUSDT 调整数量为 0，跳过
2025-06-04 17:49:11,591 - TradingBot - INFO - 第 1 轮: 处理开仓 LRCUSDT BUY, 需求数量=1.0
2025-06-04 17:49:12,217 - TradingBot - WARNING - LRCUSDT 数量调整为 0 (因名义价值 0.08814000000000001 小于最小值 5.0)
2025-06-04 17:49:12,217 - TradingBot - INFO - LRCUSDT 数量调整: 1.0 -> 0, 最小值: 1.0, 最大值: 10000000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=0
2025-06-04 17:49:12,219 - TradingBot - INFO - 第 1 轮: LRCUSDT 开仓调整后数量=0, is_reverse_open=False
2025-06-04 17:49:12,219 - TradingBot - WARNING - 第 1 轮: LRCUSDT 调整数量为 0，跳过
2025-06-04 17:49:12,219 - TradingBot - INFO - 第 1 轮: 处理开仓 BELUSDT SELL, 需求数量=-1.0
2025-06-04 17:49:12,813 - TradingBot - WARNING - BELUSDT 数量调整为 0 (因名义价值 0.2944 小于最小值 5.0)
2025-06-04 17:49:12,813 - TradingBot - INFO - BELUSDT 数量调整: 1.0 -> 0, 最小值: 1.0, 最大值: 10000000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=0
2025-06-04 17:49:12,815 - TradingBot - INFO - 第 1 轮: BELUSDT 开仓调整后数量=0, is_reverse_open=False
2025-06-04 17:49:12,815 - TradingBot - WARNING - 第 1 轮: BELUSDT 调整数量为 0，跳过
2025-06-04 17:49:12,815 - TradingBot - INFO - 第 1 轮: 处理开仓 CTKUSDT SELL, 需求数量=-1.0
2025-06-04 17:49:13,535 - TradingBot - WARNING - CTKUSDT 数量调整为 0 (因名义价值 0.3214 小于最小值 5.0)
2025-06-04 17:49:13,536 - TradingBot - INFO - CTKUSDT 数量调整: 1.0 -> 0, 最小值: 1.0, 最大值: 2500000.0, 名义价值=0.0, 真实保证金=0.000000, 数量精度=0
2025-06-04 17:49:13,538 - TradingBot - INFO - 第 1 轮: CTKUSDT 开仓调整后数量=0, is_reverse_open=False
2025-06-04 17:49:13,538 - TradingBot - WARNING - 第 1 轮: CTKUSDT 调整数量为 0，跳过
2025-06-04 17:49:13,658 - TradingBot - INFO - 获取到 14 个非零持仓
2025-06-04 17:49:14,248 - TradingBot - INFO - AERGOUSDT 平仓数量调整: 1.0 -> 1.0, 最小值: 1.0, 最大值: 4000000.0, 名义价值=0.12077, 真实保证金=0.040257, 数量精度=0
2025-06-04 17:49:14,249 - TradingBot - INFO - 第 1 轮: AERGOUSDT 差值 -1.0 为小额调整（名义价值 0.12077 < 5 或数量过小），跳过后续轮次
2025-06-04 17:49:14,809 - TradingBot - INFO - DENTUSDT 平仓数量调整: 159.0 -> 159.0, 最小值: 1.0, 最大值: 500000000.0, 名义价值=0.118773, 真实保证金=0.039591, 数量精度=0
2025-06-04 17:49:14,810 - TradingBot - INFO - 第 1 轮: DENTUSDT 差值 159.0 为小额调整（名义价值 0.118773 < 5 或数量过小），跳过后续轮次
2025-06-04 17:49:15,381 - TradingBot - INFO - DFUSDT 平仓数量调整: 3.0 -> 3.0, 最小值: 1.0, 最大值: 5000000.0, 名义价值=0.14307, 真实保证金=0.047690, 数量精度=0
2025-06-04 17:49:15,383 - TradingBot - INFO - 第 1 轮: DFUSDT 差值 -3.0 为小额调整（名义价值 0.14307 < 5 或数量过小），跳过后续轮次
2025-06-04 17:49:16,281 - TradingBot - INFO - SXPUSDT 平仓数量调整: 0.4000000000000057 -> 0.4, 最小值: 0.1, 最大值: 1000000.0, 名义价值=0.07392, 真实保证金=0.024640, 数量精度=1
2025-06-04 17:49:16,283 - TradingBot - INFO - 第 1 轮: SXPUSDT 差值 0.4000000000000057 为小额调整（名义价值 0.07392 < 5 或数量过小），跳过后续轮次
2025-06-04 17:49:16,811 - TradingBot - INFO - LRCUSDT 平仓数量调整: 1.0 -> 1.0, 最小值: 1.0, 最大值: 10000000.0, 名义价值=0.08815, 真实保证金=0.029383, 数量精度=0
2025-06-04 17:49:16,813 - TradingBot - INFO - 第 1 轮: LRCUSDT 差值 1.0 为小额调整（名义价值 0.08815 < 5 或数量过小），跳过后续轮次
2025-06-04 17:49:17,350 - TradingBot - INFO - BELUSDT 平仓数量调整: 1.0 -> 1.0, 最小值: 1.0, 最大值: 10000000.0, 名义价值=0.2945, 真实保证金=0.098167, 数量精度=0
2025-06-04 17:49:17,352 - TradingBot - INFO - 第 1 轮: BELUSDT 差值 -1.0 为小额调整（名义价值 0.2945 < 5 或数量过小），跳过后续轮次
2025-06-04 17:49:17,885 - TradingBot - INFO - CTKUSDT 平仓数量调整: 1.0 -> 1.0, 最小值: 1.0, 最大值: 2500000.0, 名义价值=0.3214, 真实保证金=0.107133, 数量精度=0
2025-06-04 17:49:17,886 - TradingBot - INFO - 第 1 轮: CTKUSDT 差值 -1.0 为小额调整（名义价值 0.3214 < 5 或数量过小），跳过后续轮次
2025-06-04 17:49:17,887 - TradingBot - INFO - 第 1 轮完成，剩余需求: {}
2025-06-04 17:49:17,887 - TradingBot - INFO - 第 1 轮后所有目标已达成，结束限价单调仓
2025-06-04 17:49:17,887 - TradingBot - INFO - ==================== 市价单补齐：后续调仓 ====================
2025-06-04 17:49:18,010 - TradingBot - INFO - 获取到 14 个非零持仓
2025-06-04 17:49:18,010 - TradingBot - INFO - 市价单补齐：所有目标已达成，无需补齐
2025-06-04 17:49:18,143 - TradingBot - INFO - 准备保存 14 条持仓记录，Run_ID=2025-06-04_174840, 调仓日期=2025-06-04
2025-06-04 17:49:18,151 - TradingBot - INFO - 持仓数据已保存到 data/positions_output.csv，合并后记录数: 56
2025-06-04 17:49:18,163 - TradingBot - INFO - 验证: data/positions_output.csv 中 Run_ID=2025-06-04_174840 的记录数: 14
2025-06-04 17:49:43,768 - TradingBot - INFO - 账户信息已保存为JSON文件: data/account_info_20250604_174943.json
2025-06-04 17:49:43,769 - TradingBot - INFO - 开始计算手续费和已实现盈亏...
2025-06-04 17:49:43,769 - TradingBot - INFO - 使用实际交易时间戳: start_time=1749030520885, end_time=1749030558164
2025-06-04 17:49:43,769 - TradingBot - INFO - 开始获取手续费记录: start_time=1749030520885, end_time=1749030558164, limit=1000
2025-06-04 17:49:43,905 - TradingBot - INFO - API返回空记录，可能该时间段内没有交易
2025-06-04 17:49:43,905 - TradingBot - INFO - 获取到 0 条手续费记录
2025-06-04 17:49:43,905 - TradingBot - INFO - 手续费汇总 (trade_commission_summary_2025-06-04): 0.0 USDT, 记录数: 0
2025-06-04 17:49:43,905 - TradingBot - INFO - 手续费计算结果: {'value': 0.0, 'description': '买卖交易手续费总和', 'date': '2025-06-04_17:49:43', 'records_count': 0}
2025-06-04 17:49:43,906 - TradingBot - INFO - 已存在已实现盈亏记录 (trade_realized_pnl_summary_2025-06-04): 0 USDT
2025-06-04 17:49:43,906 - TradingBot - INFO - 已实现盈亏计算结果: {'value': 0, 'description': '买卖交易已实现盈亏总和', 'date': '2025-06-04'}
2025-06-04 17:49:44,170 - TradingBot - INFO - 获取到 14 个非零持仓
2025-06-04 17:49:44,178 - TradingBot - INFO - 账户信息已保存为JSON文件: data/account_info_20250604_174840.json
2025-06-04 17:49:44,213 - TradingBot - INFO - 加载 account_metrics.xlsx 成功，记录数: 42
2025-06-04 17:49:44,216 - TradingBot - INFO - 找到 3 条 after_trade_balance 记录
2025-06-04 17:49:44,216 - TradingBot - INFO - 找到上一次记录: Record_Time=2025-06-04 17:31:09, Run_ID=2025-06-04_172955, after_trade_balance=48.2009921
2025-06-04 17:49:44,217 - TradingBot - INFO - Pre-rebalance return: 0.198543%
2025-06-04 17:49:44,217 - TradingBot - INFO - Post-rebalance return: 0.150309%
2025-06-04 17:49:44,732 - TradingBot - INFO - 成功写入 14 条指标到 data/account_metrics.xlsx，Run_ID=2025-06-04_174840
2025-06-04 17:49:44,733 - TradingBot - INFO - ✅ 交易引擎执行完成 | RunID: 2025-06-04_174840
2025-06-04 17:49:44,734 - TradingBot - INFO - 当前日期: 2025-06-04, Run_ID: 2025-06-04_174840
2025-06-04 17:49:44,743 - TradingBot - INFO - 读取 data/positions_output.csv，去重后包含 56 条记录
2025-06-04 17:49:44,743 - TradingBot - INFO - 所有 Run_ID: ['2025-06-04_172118', '2025-06-04_172255', '2025-06-04_172955', '2025-06-04_174840']
2025-06-04 17:49:44,743 - TradingBot - INFO - 所有调仓日期: ['2025-06-04']
2025-06-04 17:49:44,745 - TradingBot - INFO - 找到 14 条 Run_ID=2025-06-04_174840 或日期=2025-06-04 的记录
2025-06-04 17:49:44,745 - TradingBot - INFO - 已提取所需字段的持仓数据
2025-06-04 17:49:44,746 - TradingBot - INFO - 正持仓数量: 7, 负持仓数量: 7
2025-06-04 17:49:44,749 - TradingBot - INFO - 资金费率文件 data/pos20250604_v3.csv 已加载，去重后包含 173 条记录
2025-06-04 17:49:44,751 - TradingBot - INFO - 已为 7 个黑名单币种设置 ErrorReason: 黑名单过滤
2025-06-04 17:49:44,752 - TradingBot - INFO - 已为 21 个币种映射其他错误原因
2025-06-04 17:49:44,754 - TradingBot - INFO - 正持仓资金费率数据已筛选，最大 id: 7
2025-06-04 17:49:44,758 - TradingBot - INFO - 正持仓数据已完成合并并处理空调仓日期、Run_ID 和 ErrorReason
2025-06-04 17:49:44,759 - TradingBot - INFO - 负持仓资金费率数据已筛选，最小 id: 151
2025-06-04 17:49:44,762 - TradingBot - INFO - 负持仓数据已完成合并并处理空调仓日期、Run_ID 和 ErrorReason
2025-06-04 17:49:44,765 - TradingBot - INFO - 正负持仓结果已合并
2025-06-04 17:49:44,836 - TradingBot - INFO - 分析结果已去重并追加写入文件: data/position_analysis.xlsx，记录数: 120
2025-06-04 17:49:44,867 - TradingBot - INFO - 唯一日期数量为 1，少于3天，不执行可视化
2025-06-04 17:49:44,892 - TradingBot - INFO - 添加附件: data\position_analysis.xlsx
2025-06-04 17:49:44,892 - TradingBot - INFO - 未找到可视化 PDF 文件: data\2025-06-04_account_metrics_data_visualization.pdf
2025-06-04 17:49:44,907 - TradingBot - INFO - 尝试连接到 smtp.gmail.com:465 (第 1/5)
2025-06-04 17:49:45,777 - TradingBot - INFO - 连接成功，开始登录
2025-06-04 17:49:48,865 - TradingBot - INFO - 邮件发送成功！
2025-06-04 17:49:49,057 - TradingBot - INFO - 20250604 交易完成，Run_ID: 2025-06-04_174840
2025-06-04 17:49:49,058 - TradingBot - INFO - 记录已处理文件 data/pos20250604_v3.csv，哈希: 2fd5f461de1ee0e3813c1573e05a1290，Run_ID: 2025-06-04_174840
2025-06-04 17:49:49,058 - TradingBot - INFO - 交易完成后等待 10 分钟
2025-06-04 17:59:49,057 - TradingBot - INFO - 检查 20250604 的文件或邮件，Run_ID: 2025-06-04_175949
2025-06-04 17:59:49,057 - TradingBot - INFO - 检查本地文件: data/pos20250604_v3.csv
2025-06-04 17:59:49,058 - TradingBot - INFO - 文件 data/pos20250604_v3.csv 已处理（哈希: 2fd5f461de1ee0e3813c1573e05a1290），跳过
2025-06-04 17:59:49,058 - TradingBot - INFO - 未收到 20250604 的pos文件，等待 10 分钟后重试
2025-06-04 18:09:49,066 - TradingBot - INFO - 检查 20250604 的文件或邮件，Run_ID: 2025-06-04_180949
2025-06-04 18:09:49,066 - TradingBot - INFO - 检查本地文件: data/pos20250604_v3.csv
2025-06-04 18:09:49,072 - TradingBot - INFO - 文件 data/pos20250604_v3.csv 已处理（哈希: 2fd5f461de1ee0e3813c1573e05a1290），跳过
2025-06-04 18:09:49,072 - TradingBot - INFO - 未收到 20250604 的pos文件，等待 10 分钟后重试
2025-06-04 18:19:49,078 - TradingBot - INFO - 检查 20250604 的文件或邮件，Run_ID: 2025-06-04_181949
2025-06-04 18:19:49,078 - TradingBot - INFO - 检查本地文件: data/pos20250604_v3.csv
2025-06-04 18:19:49,084 - TradingBot - INFO - 文件 data/pos20250604_v3.csv 已处理（哈希: 2fd5f461de1ee0e3813c1573e05a1290），跳过
2025-06-04 18:19:49,084 - TradingBot - INFO - 未收到 20250604 的pos文件，等待 10 分钟后重试
